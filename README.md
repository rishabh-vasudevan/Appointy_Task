# Appointy_Task
This api has been built according to the task assigned by Apponity. __All the tasks Provided have been completed__<br>
[Link to the Document of the task](https://docs.google.com/document/d/1sFhVumoczf_PmaL_R__Rm9AHqaHsUWgj1x9YcQP6Is4/preview?pru=AAABfIQlr6s*R0w0zNFZ57-oXcTKNIVnVQ#)

## List of Task:

* Api call to add new user
* Api call to retrieve user based on the user_id
* Api call to add posts
* Api call to retrieve post based on post_id
* Api call to retrieve all posts made by a particular user
* The Api should be made using GO
* MongoDB should be used for the database
* Only particular libraries and packages were allowed
* Password should be stored safely, so that it cannot be reengineered
* The API should be **thread safe**
* There must be **pagination** at list end points
* There should be **unit test**

## Methods
### Security of Password
For the security and safety of the password I have added salting and Hashing before storing it in the database.
```
hashedPassword, _ := bcrypt.GenerateFromPassword([]byte(u.Password), 8)
```
The function bcrypt has been used for this functionality

### Thread safety of the Api
For thread safety so that only one user can update the database at a time. The `lock.Lock()` function has been applied on all the functions that have the ability to alter the database.
In case of functions that don't alter the database the `lock.Lock()` function has not been applied because that would unnecessarlily make the api slower.

### Pagination
All the API calls return only one json object except the last API which returns a list of objects containing posts generated by a particular user. In this particualr API call pagination has been applied by limiting the number of posts returned to 10.
```
uc.Session.DB("appointy").C("posts").Find(nil).Select(bson.M{"user": id}).Limit(10).All(&result)
```
This is the code used for it

# __output of API calls :__
<br>
<br>

**Output of Adding a user to the MongoDB database :**
![image](https://user-images.githubusercontent.com/62301939/136638590-5c37fe87-558f-4e7c-a5ae-581a272c500c.png)<br>
**As you can see the Password is not in plain text it is in a hashed form**<br>

**Output of Retrieving the User based on the user_id :**
![image](https://user-images.githubusercontent.com/62301939/136638711-fecc3b06-ce91-412c-b8a5-fc54e02db871.png)<br>

**Output of Adding a Post to the MongoDB database :**
![image](https://user-images.githubusercontent.com/62301939/136636073-4938a44b-e468-4b7c-9e69-109c466d39e5.png)

**Output of Retrieving a post based on the post_id :**

![image](https://user-images.githubusercontent.com/62301939/136636108-dc608076-853d-41aa-b990-47e3c1d38c71.png)

**Output of Retrieving all the posts made by a particular user based on the user_id :**
![image](https://user-images.githubusercontent.com/62301939/136663538-b90ebbbb-7a74-41b3-8a2d-8fa2772b1979.png)<br>
**Because of Pagination a maximum 10 posts can be retrieved this will improve the time for API call**
